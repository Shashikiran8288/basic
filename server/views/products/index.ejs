<%- include('../partials/header.ejs') %>
<div style="margin-top: 1%;"></div>
<%- include('../partials/navigation.ejs') %>
<main>
  <input type="text" id="myInput" onkeyup="searchByfirstColumn()" placeholder="Search for names.." title="Type in a name">

  <table id="myTable">
    <tr class="header">
    <th> Sino </th>
      <th >Name</th>
      <th >Type</th>
      <th >Weight</th>
      <th >Guage</th>
      <th >Size</th>
      <th >rate</th>
      <th >Actions</th>
    </tr>
    <% for(let count = 0; count < rows.length; count++ ){ %>
    <tr>
      <td><%= count+1 %> </td>
      <td> <%= rows[count].dataValues['product']  %> </td>
      <td> <%= rows[count].dataValues['productType']  %> </td>
      <td> <%= rows[count].dataValues['weight_based_on_guage']  %> </td>
      <td> <%= rows[count].dataValues['guage']  %> </td>
      <td> <%= rows[count].dataValues['size']  %> </td>
      <td> <%= rows[count].dataValues['price']  %> </td>
      <td> <a href="/api/products/<%= rows[count].dataValues['productId'] %>" >Edit</a>,
        <a  href="/api/products/<%= rows[count].dataValues['productId'] %>/delete">Delete</a> </td>
      </tr>
      <% } %>
      <tr>
      <td colspan="8">
      <input type='hidden' id="totalcount" value=<%= count%> >
        <% let per_page=5000, total_page =  parseInt(count/per_page); %>
        <div class="pagination">
          <a href="/api/products?offset=0&limit=<%= per_page %>">&laquo;</a>
        <%  for(let i = 0; i <= total_page; i++ ){ %>
              <a class= "<%= parseInt(pagenum) == i ? 'active':''%>" href="/api/products?offset=<%= per_page * i %>&limit=<%= per_page %>" > <%= i+1 %></a>
         <% } %>
         <a href="/api/products?offset=<%= total_page * per_page  %>&limit=<%= per_page %>">&raquo;</a>
        </div>
      </td>
      </tr>
    </table>

  </main>
  
</body> 
</html>